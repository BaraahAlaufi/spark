<html>
    <head>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

        <link rel="stylesheet" href="styles.css">

        <title>SPARK: race schedule</title>
    </head>

    <body style="background-color: #232831;">
        
            <nav class="navbar navbar-expand-sm navbar-dark" >
                    
                    <a class="navbar-brand" href="#">
                        <img src="logo.png" alt="Logo" style="width: 60px;">
                    </a>

                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link active" href="schedule.html">Schedule</a></li>
                    <li class="nav-item"><a class="nav-link" href="teams.html">Teams</a></li>
                    <li class="nav-item"><a class="nav-link" href="tickets.html">Tickets</a></li>
                    <li class="nav-item"><a class="nav-link" href="news.html">News</a></li>
                    <li class="nav-item"><a class="nav-link " href="LogIn.html">Log in</a></li>
                    <li class="nav-item"><a class="nav-link" href="SignUp.html">Sign up</a></li>
                    <li class="nav-item"><a class="nav-link" href="contact.html">Contact us</a></li>
                    <li class="nav-item"><a class="nav-link" href="about.html">About us</a></li>
                    <li class="nav-item"><a class="nav-link" href="calculation.html">Calculation</a></li>
                    <li class="nav-item"><a class="nav-link" href="funPage.html">Fun Page</a></li>
                    <li class="nav-item"><a class="nav-link" href="feedBack.html">Feedback</a></li>
                </ul>
        </nav> 

        <div class="row" style="margin: 0%;">
            <h1 class="head" id="vp">Race Schedule<span style="color: #ce2029;"></span></h1>
        </div>
        <div class="row">
            <h5>STAY UPDATED ON THE UPCOMING RACES OF THE SEASON</h5>
        </div>

        <div class="container justify-content-center" style="background-color: #232831;">
            
        <div class="col-2" style="margin-left:9.5%;padding-top:20px;margin-bottom: -50px;">
            <button type="button" class="btn btn-primary" style="background-color: #Ce2029; color: #efefef;" name="add" onclick="" data-bs-toggle="modal" data-bs-target="#staticBackdrop">Add</button>

             <button type="button" class="btn btn-primary" style="background-color: #Ce2029; color: #efefef;" name="delete" onclick="" data-bs-toggle="modal" data-bs-target="#staticBackdrop1">Delete</button>
        </div>


        <form id="raceForm" class="container-fluid mt-5 d-flex justify-content-center text-center" action="raceSearch.php" method="post">
            <div class="col-8">
                <input type="text" class="form-control" style="background-color: #3d424d; color:#efefef;width: 100%;" id="searchInput" name="input" placeholder="Search for a Race...">
            </div>
            <div class="col-2">
                <button type="button" class="btn btn-primary" style="background-color: #Ce2029; color: #efefef;" name="search" onclick="getresult();">Search</button>
            </div>
           
        </form>


        <div class="col-12" style="margin-left:8%;">
            <div id="result" class="container justify-content-center" style="background-color: #232831;">
            </div>
        </div>

        <div class="modal fade " id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true" >
            <div class="modal-dialog" >
                <div class="modal-content" >
                    <div class="modal-header">
                        <h4 class="modal-title fs-5" id="staticBackdropLabel" style="color: #000;">ADD RACE</h4>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                <div class="modal-body" style="background-color:#3d424d;">
                   
                    <form id="raceADDForm"  class="form-group" style="margin: 10px;"  action="addrace.php" method="post">
                        <div class="mb-3 mt-3" >
                            <label for="round" class="form-label" style="color: #efefef;">Round:</label>
                            <input type="text"  style="background-color: #3d424d; color:#efefef" class="form-control" id="round" placeholder=" Please enter round number" name="round" required>
                        </div>

                        <div class="mb-3 mt-3" >
                            <label for="circuit" class="form-label" style="color: #efefef;"> Circuit:</label>
                            <input type="text"  style="background-color: #3d424d; color:#efefef" class="form-control" id="circuit" placeholder=" Please enter circuit" name="circuit" >
                        </div>
                         <div class="mb-3 mt-3" >
                            <label for="date" class="form-label" style="color: #efefef;"> Date:</label>
                            <input type="text"  style="background-color: #3d424d; color:#efefef" class="form-control" id="date" placeholder=" Please enter date" name="date" >
                        </div>
                    </form>


                </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" onclick="addfunction();">ADD</button>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </div>
        </div>

          <div class="modal fade " id="staticBackdrop1" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true" >
            <div class="modal-dialog" >
                <div class="modal-content" >
                    <div class="modal-header">
                        <h4 class="modal-title fs-5" id="staticBackdropLabel" style="color: #000;">ADD RACE</h4>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                <div class="modal-body" style="background-color:#3d424d;">
                   
                    <form id="raceDELForm"  class="form-group" style="margin: 10px;"  action="delrace.php" method="post">
                        <div class="mb-3 mt-3" >
                            <label for="round1" class="form-label" style="color: #efefef;">Round:</label>
                            <input type="text"  style="background-color: #3d424d; color:#efefef" class="form-control" id="round1" placeholder=" Please enter round number" name="round1" required>
                        </div>
                    </form>


                </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" onclick="deletefunction();">DELETE</button>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </div>
        </div>

            <div class="container justify-content-center" style="background-color: #232831;">
                <table class="table mt-3" id="raceTable"></table>
            </div>
      
            <div class="row">
                <div class="col">
                    <img class="schedule" src="f1-img/bahrain_circuit.png" />
                    <p class="Round">ROUND 1</p>
                    <p class="Circuit">BAHRAIN
                        <br>Bahrain International Circuit
                        <br>29 FEB - 02 MAR</p>
                </div>
                <div class="col">
                    <img class="schedule" src="f1-img/saudiArabia_circuit.png"/> 
                    <p class="Round">Round 2</p>
                    <p class="Circuit">SAUDI ARABIA
                    <br>Jedda Cornich Circuit
                    <br>07 MAR - 09 MAR</p>
                </div>
                <div class="col">
                    <img class="schedule" src="f1-img/australia_circuit.png"/> 
                    <p class="Round">Round 3</p>
                    <p class="Circuit">AUSTRALIA
                    <br>Melbourne Grand Prix Circuit
                    <br>22 MAR - 24 MAR</p>
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <img class="schedule" src="f1-img/sukuza_circuit.png"/>
                    <p class="Round">Round 4</p>
                    <p class="Circuit">JAPAN
                    <br>SUZUKA INTERNATIONAL RACING COURSE
                    <br>05 APR - 07 APR
                    </p>
                </div>
                <div class="col">
                    <img class="schedule" src="f1-img/china_circuit.png"/>
                    <p class="Round">Round 5</p>
                    <p class="Circuit">CHINA
                    <br>SHANGHAI INTERNATIONAL CIRCUIT
                    <br> 19 APR - 21 APR
                    </p>
                </div>
                <div class="col">
                    <img class="schedule" src="f1-img/maimi_circuit.png"/>
                    <p class="Round">Round 6</p>
                    <p class="Circuit">UNITED STATES
                    <br>MIAMI INTERNATIONAL AUTODROME
                    <br>03 MAY - 06 MAY
                    </p>
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <img class="schedule" src="f1-img/imola_circuit.png"/>
                    <p class="Round">Round 7</p>
                    <p class="Circuit">ITALY
                    <br>AUTODROMO ENZO E DINO FERRARI
                    <br>17 MAY - 19 MAY
                    </p>
                </div>
                <div class="col">
                    <img class="schedule" src="f1-img/monaco_circuit.png"/>
                    <p class="Round">Round 8</p>
                    <p class="Circuit">MONACO
                    <br>CIRCUIT DE MONACO
                    <br>24 MAY - 26 MAY
                    </p>
                </div>
                <div class="col">
                    <img class="schedule" src="f1-img/canada_circuit.png"/>
                    <p class="Round">Round 9</p>
                    <p class="Circuit">CANADA
                    <br>CIRCUIT GILLES-VILLENEUVE
                    <br>07 JUN - 09 JUN
                    </p>
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <img class="schedule" src="f1-img/spain_circuit.png"/>
                    <p class="Round">Round 10</p>
                    <p class="Circuit">SPAIN
                    <br>CIRCUIT DE BARCELONA-CATALUNYA
                    <br> 21 JUN - 23 JUN
                    </p>
                </div>
                <div class="col">
                    <img class="schedule" src="f1-img/austria_circuit.png"/>
                    <p class="Round">Round 11</p>
                    <p class="Circuit">AUSTRIA
                    <br>RED BULL RING
                    <br>28 JUN - 30 JUN
                    </p>
                </div>
                <div class="col">
                    <img class="schedule" src="f1-img/britian_circuit.png"/>
                    <p class="Round">Round 12</p>
                    <p class="Circuit">GREAT BRITIAN
                    <br>SILVERSTONE CIRCUIT
                    <br>05 JUL - 07 JUL
                    </p>
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <img class="schedule" src="f1-img/hungary_circuit.png"/>
                    <p class="Round">Round 13</p>
                    <p class="Circuit">HANGARY
                    <br>HUNGARORING
                    <br>19 JUL - 21 JUL
                    </p>
                </div>
                <div class="col">
                    <img class="schedule" src="f1-img/belgium_circuit.png"/>
                    <p class="Round">Round 14</p>
                    <p class="Circuit">BELGIUM
                    <br>CIRCUIT DE SPA-FRANCORCHAMPS
                    <br>26 JUL - 28 JUL
                    </p>
                </div>
                <div class="col">
                    <img class="schedule" src="f1-img/netherlands_circuit.png"/>
                    <p class="Round">Round 15</p>
                    <p class="Circuit">NETHERLANDS
                    <br>CIRCUIT ZANDVOORT
                    <br>23 AUG - 25 AUG
                    </p>
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <img class="schedule" src="f1-img/italy_circuit.png"/>
                    <p class="Round">Round 16</p>
                    <p class="Circuit">ITALY
                    <br>AUTODROMO NAZIONALE MONZA
                    <br>30 AUG - 01 SEP
                    </p>
                </div>
                <div class="col">
                    <img class="schedule" src="f1-img/AZERBAIJAN_circuit.png"/>
                    <p class="Round">Round 17</p>
                    <p class="Circuit">AZERBAIJAN
                    <br>BAKU CITY CIRCUIT
                    <br>13 SEP - 15 SEP
                    </p>
                </div>
                <div class="col">
                    <img class="schedule" src="f1-img/singapore_circuit.png"/>
                    <p class="Round">Round 18</p>
                    <p class="Circuit">SIGAPORE
                    <br>MARINA BAY STREET CIRCUIT
                    <br>20 SEP - 22 SEP
                    </p>
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <img class="schedule" src="f1-img/united states2_circuit.png"/>
                    <p class="Round">Round 19</p>
                    <p class="Circuit">UNITED STATES
                    <br>CIRCUIT OF THE AMERICAS
                    <br>18 OCT- 20 OCT
                    </p>
                </div>
                <div class="col">
                    <img class="schedule" src="f1-img/mexico_circuit.png"/>
                    <p class="Round">Round 20</p>
                    <p class="Circuit">MEXICO
                    <br>AUTÓDROMO HERMANOS RODRÍGUEZ
                    <br>25 OCT - 27 OCT
                    </p>
                </div>
                <div class="col">
                    <img class="schedule" src="f1-img/brazil_circuit.png"/>
                    <p class="Round">Round 21</p>
                    <p class="Circuit">BRAZIL
                    <br>AUTÓDROMO JOSÉ CARLOS PACE
                    <br>01 NOV - 03 NOV
                    </p>
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <img class="schedule" src="f1-img/las vegas_circuit.png"/>
                    <p class="Round">Round 22</p>
                    <p class="Circuit">UNITED STATES
                    <br>LAS VEGAS STRIP CIRCUIT
                    <br>21 NOV - 23 NOV
                    </p>
                </div>
                <div class="col">
                    <img class="schedule" src="f1-img/qatar_circuit.png"/>
                    <p class="Round">Round 23</p>
                    <p class="Circuit">QATAR
                    <br>LUSAIL INTERNATIONAL CIRCUIT
                    <br>29 NOV - 01 DEC
                    </p>
                </div>
                <div class="col">
                    <img class="schedule" src="f1-img/abu dhabi_circuit.png"/>
                    <p class="Round">Round 24</p>
                    <p class="Circuit">ABU DHABI
                    <br>YAS MARINA CIRCUIT
                    <br>06 DEC - 08 DEC
                    </p>
                </div>
            </div>
       

        
           
        </div>


        <div class="footer text-center">
            <div class="row d-flex justify-content-center align-items-center" style="background-color: #Ce2029; height: 80px;">
                <div class="col"> <a href="LogIn.html" class="btn" style="background-color: #3d424d; color: #efefef;">Log in</a> </div>
                <div class="col"> <a href="SignUp.html" class="btn" style="background-color: #3d424d; color: #efefef;">Sign up</a> </div>
                <div class="col"> <a href="contact.html" class="btn" style="background-color: #3d424d; color: #efefef;">Contact us</a> </div>
            </div>
    
         </div>
        
         <script>

            function getresult(){
                var form = document.getElementById("raceForm");
                var formData = new FormData(form);
                var xhr = new XMLHttpRequest();
                xhr.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    document.getElementById("result").innerHTML = this.responseText;
                }
                };
                xhr.open("POST", form.action, true);
                xhr.send(formData);
            }
            
            $('#staticBackdrop').on('shown.bs.modal', function () {
                $('#round').focus();  
            });

             $('#staticBackdrop1').on('shown.bs.modal', function () {
                $('#round1').focus();  
            });

            function addfunction(){
                if(round.value==''||round.value==null){ $('#round').focus();return false;}
                if(circuit.value==''||circuit.value==null){ $('#circuit').focus();return false;}
                if(date.value==''||date.value==null){ $('#date').focus();return false;}
                var form = document.getElementById("raceADDForm");
                var formData = new FormData(form);
                var xhr = new XMLHttpRequest();
                xhr.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    document.getElementById("result").innerHTML = this.responseText;
                    $('#staticBackdrop').modal('hide');
                    round.value='';circuit.value='';date.value='';
                }
                };
                xhr.open("POST", form.action, true);
                xhr.send(formData);
            }

            function deletefunction(){
                if(round1.value==''||round1.value==null){ $('#round1').focus();return false;}
                var form = document.getElementById("raceDELForm");
                var formData = new FormData(form);
                var xhr = new XMLHttpRequest();
                xhr.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    document.getElementById("result").innerHTML = this.responseText;
                    $('#staticBackdrop1').modal('hide');
                    round1.value=''; 
                }
                };
                xhr.open("POST", form.action, true);
                xhr.send(formData);
            }

            

            document.getElementById("searchInput").addEventListener("keydown", function(event) {
                if (event.keyCode === 13) {
                    event.preventDefault();
                }
            });

            //*******************************************************************

            //OBJECT RACE
            //defining an object for each race information
           
            //SEARCHING THROUGH DATA
            function search() {
                var input = document.getElementById("searchInput").value.toLowerCase(); //assigning the input in a variable
                var filter = races.filter(race => { //going through all array's data (each race in races)
                    return race.round.toLowerCase().includes(input) || //checking every race for its round, circuit or date if it includes the same searched input
                           race.circuit.toLowerCase().includes(input) ||
                           race.date.toLowerCase().includes(input);
                });
                //check if there are search results
                if (filter.length > 0) {
                    //display search results
                    Show(filter);
                    var table = document.getElementById("raceTable"); 

                //to create a title for the results
                    var headerRow = table.insertRow(0);//creating another row as a title holder
                    var headerCell = headerRow.insertCell(0); 
                    headerCell.colSpan = 3; //merge the whole row as 1 col
                    headerCell.textContent = "Search Results"; //displying title search results

            }}

            //DISPLAYING THE DATA
            function Show(data) {
                var table = document.getElementById("raceTable"); //getting the table with the id raceTable in a variable
    
                table.innerHTML = ""; //clear the previous data searched
    
                var headerRow = table.insertRow(); //create tje table's header
                var headers = ["Round", "Circuit", "Date"];
                headers.forEach(header => { //loop to go in each colom
                    var th = document.createElement("th");
                    th.textContent = header; //adding each header title in the first row
                    headerRow.appendChild(th); //adding a new colom in the sam row 
                });
    
                data.forEach(race => { //adding rows for each race
                    var row = table.insertRow();
                    var roundCell = row.insertCell(0); //inserting 3 cells in the same row
                    var circuitCell = row.insertCell(1);
                    var dateCell = row.insertCell(2);
    
                    roundCell.textContent = race.round; //adding the data from the object on each cell
                    circuitCell.textContent = race.circuit;
                    dateCell.textContent = race.date;});}
        </script>


    </body>
</html>
